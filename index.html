<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GNQCF Register</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <div id="app"></div>
  
  <script>
    // Storage helper
    const storage = {
      get: (key) => {
        try {
          return JSON.parse(localStorage.getItem(key));
        } catch {
          return null;
        }
      },
      set: (key, value) => {
        localStorage.setItem(key, JSON.stringify(value));
      }
    };

    // Initial data
    const initialProviders = ['T.A. Marryshow Community College', 'Grenada National College', "St. George's University", 'OECS Institute', 'New Life Organisation'];
    
    // State
    let state = {
      isAdmin: false,
      showLogin: false,
      showBackend: false,
      showAddModal: false,
      showSettings: false,
      showProviderModal: false,
      editingQual: null,
      password: storage.get('admin-password') || 'admin123',
      qualifications: storage.get('qualifications') || [],
      customProviders: storage.get('custom-providers') || [],
      defaultProviders: storage.get('default-providers') || initialProviders,
      logoUrl: storage.get('logo-url') || '',
      orgName: storage.get('org-name') || 'GNAB',
      orgTagline: storage.get('org-tagline') || 'Grenada National Accreditation Board',
      search: '',
      filters: {
        provider: 'all',
        qualification: 'all',
        level: 'all',
        sector: 'all',
        verificationStatus: 'all'
      },
      formData: {}
    };

    const types = ['Certificate', 'Diploma', 'Degree'];
    const levels = ['Level 1', 'Level 2', 'Level 3', 'Level 4', 'Level 5', 'Level 6', 'Level 7', 'Level 8'];
    const sectors = ['Hospitality', 'Education', 'Healthcare', 'Agriculture', 'Technology', 'Business', 'Arts', 'Engineering'];

    // Helper functions
    function getAllProviders() {
      return [...state.defaultProviders, ...state.customProviders];
    }

    function notify(message) {
      const notif = document.createElement('div');
      notif.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50';
      notif.textContent = message;
      document.body.appendChild(notif);
      setTimeout(() => notif.remove(), 3000);
    }

    function getVerificationBadge(status) {
      const badges = {
        verified: { color: 'bg-green-100 text-green-800 border-green-300', icon: '‚úì', label: 'Verified' },
        pending: { color: 'bg-yellow-100 text-yellow-800 border-yellow-300', icon: '‚è≥', label: 'Pending' },
        rejected: { color: 'bg-red-100 text-red-800 border-red-300', icon: '‚úó', label: 'Rejected' },
        unverified: { color: 'bg-gray-100 text-gray-800 border-gray-300', icon: '‚ö†', label: 'Unverified' }
      };
      return badges[status] || badges.unverified;
    }

    function filterQualifications() {
      return state.qualifications.filter(qual => {
        const matchesKeyword = !state.search || 
          qual.title.toLowerCase().includes(state.search.toLowerCase()) ||
          qual.provider.toLowerCase().includes(state.search.toLowerCase());
        
        return matchesKeyword &&
          (state.filters.provider === 'all' || qual.provider === state.filters.provider) &&
          (state.filters.qualification === 'all' || qual.type === state.filters.qualification) &&
          (state.filters.level === 'all' || qual.level === state.filters.level) &&
          (state.filters.sector === 'all' || qual.sector === state.filters.sector) &&
          (state.filters.verificationStatus === 'all' || (qual.verificationStatus || 'unverified') === state.filters.verificationStatus);
      });
    }

    // Action functions
    function loadDemo() {
      state.qualifications = [
        {id:1,title:'Advanced Diploma in Hospitality Management',provider:'T.A. Marryshow Community College',type:'Diploma',level:'Level 5',sector:'Hospitality',description:'Hotel operations and tourism management.',verificationStatus:'verified',verificationDate:'2024-12-15'},
        {id:2,title:'Certificate in Early Childhood Education',provider:'Grenada National College',type:'Certificate',level:'Level 3',sector:'Education',description:'Child development and classroom management.',verificationStatus:'pending'},
        {id:3,title:'Bachelor of Science in Nursing',provider:"St. George's University",type:'Degree',level:'Level 6',sector:'Healthcare',description:'Professional nursing program.',verificationStatus:'verified',verificationDate:'2025-01-10'},
        {id:4,title:'Diploma in Information Technology',provider:'T.A. Marryshow Community College',type:'Diploma',level:'Level 4',sector:'Technology',description:'Programming and networking.',verificationStatus:'rejected',verificationNotes:'Does not meet standards.'},
        {id:5,title:'Certificate in Agricultural Science',provider:'OECS Institute',type:'Certificate',level:'Level 2',sector:'Agriculture',description:'Modern farming techniques.',verificationStatus:'unverified'},
        {id:6,title:'Advanced Certificate in Business Admin',provider:'Grenada National College',type:'Certificate',level:'Level 4',sector:'Business',description:'Business fundamentals.',verificationStatus:'verified',verificationDate:'2024-10-05'},
        {id:7,title:'Diploma in Culinary Arts',provider:'New Life Organisation',type:'Diploma',level:'Level 4',sector:'Hospitality',description:'Professional culinary training.',verificationStatus:'pending'},
        {id:8,title:'Bachelor of Arts in Caribbean Studies',provider:"St. George's University",type:'Degree',level:'Level 6',sector:'Arts',description:'Caribbean history and culture.',verificationStatus:'verified',verificationDate:'2024-09-12'},
        {id:9,title:'Certificate in Electrical Installation',provider:'T.A. Marryshow Community College',type:'Certificate',level:'Level 3',sector:'Technology',description:'Electrical wiring and safety.',verificationStatus:'verified',verificationDate:'2024-11-28'},
        {id:10,title:'Diploma in Primary Education',provider:'Grenada National College',type:'Diploma',level:'Level 5',sector:'Education',description:'Teacher training program.',verificationStatus:'pending'},
        {id:11,title:'Advanced Diploma in Accounting',provider:'T.A. Marryshow Community College',type:'Diploma',level:'Level 5',sector:'Business',description:'Financial reporting and taxation.',verificationStatus:'verified',verificationDate:'2024-08-15'},
        {id:12,title:'Certificate in Graphic Design',provider:'New Life Organisation',type:'Certificate',level:'Level 3',sector:'Arts',description:'Digital design and branding.',verificationStatus:'unverified'},
        {id:13,title:'Diploma in Marine Biology',provider:'OECS Institute',type:'Diploma',level:'Level 4',sector:'Agriculture',description:'Marine ecosystems and conservation.',verificationStatus:'verified',verificationDate:'2024-07-22'},
        {id:14,title:'Bachelor of Civil Engineering',provider:"St. George's University",type:'Degree',level:'Level 7',sector:'Technology',description:'Structural design and construction.',verificationStatus:'verified',verificationDate:'2024-06-10'},
        {id:15,title:'Certificate in Digital Marketing',provider:'Grenada National College',type:'Certificate',level:'Level 3',sector:'Business',description:'Social media and SEO.',verificationStatus:'pending'},
        {id:16,title:'Diploma in Mental Health Counseling',provider:'OECS Institute',type:'Diploma',level:'Level 5',sector:'Healthcare',description:'Counseling and mental health care.',verificationStatus:'verified',verificationDate:'2024-05-18'},
        {id:17,title:'Certificate in Renewable Energy',provider:'T.A. Marryshow Community College',type:'Certificate',level:'Level 4',sector:'Technology',description:'Solar and wind power systems.',verificationStatus:'unverified'},
        {id:18,title:'Diploma in Tourism Management',provider:'New Life Organisation',type:'Diploma',level:'Level 4',sector:'Hospitality',description:'Travel planning and tourism.',verificationStatus:'pending'},
        {id:19,title:'Bachelor of Environmental Science',provider:"St. George's University",type:'Degree',level:'Level 6',sector:'Agriculture',description:'Environmental conservation.',verificationStatus:'verified',verificationDate:'2024-04-25'},
        {id:20,title:'Certificate in Automotive Technology',provider:'T.A. Marryshow Community College',type:'Certificate',level:'Level 2',sector:'Technology',description:'Vehicle maintenance and repair.',verificationStatus:'verified',verificationDate:'2024-03-14'}
      ];
      storage.set('qualifications', state.qualifications);
      notify('20 qualifications loaded!');
      render();
    }

    function login() {
      const password = document.getElementById('pwInput').value;
      if (password === state.password) {
        state.isAdmin = true;
        state.showLogin = false;
        notify('Logged in successfully!');
        render();
      } else {
        notify('Invalid password');
      }
    }

    function saveQualification() {
      if (!state.formData.title || !state.formData.provider) {
        notify('Please fill in required fields');
        return;
      }

      if (state.editingQual) {
        state.qualifications = state.qualifications.map(q => 
          q.id === state.editingQual.id ? { ...q, ...state.formData } : q
        );
      } else {
        state.qualifications.push({ id: Date.now(), ...state.formData });
      }

      storage.set('qualifications', state.qualifications);
      state.showAddModal = false;
      state.editingQual = null;
      notify('Saved successfully!');
      render();
    }

    function deleteQualification(id) {
      if (confirm('Delete this qualification?')) {
        state.qualifications = state.qualifications.filter(q => q.id !== id);
        storage.set('qualifications', state.qualifications);
        notify('Deleted!');
        render();
      }
    }

    function addProvider() {
      const name = document.getElementById('newProviderInput').value.trim();
      if (!name) {
        notify('Please enter a provider name');
        return;
      }
      if (getAllProviders().includes(name)) {
        notify('Provider already exists');
        return;
      }
      state.customProviders.push(name);
      storage.set('custom-providers', state.customProviders);
      notify('Provider added!');
      document.getElementById('newProviderInput').value = '';
      render();
    }

    function deleteCustomProvider(name) {
      if (confirm(`Delete "${name}"?`)) {
        state.customProviders = state.customProviders.filter(p => p !== name);
        storage.set('custom-providers', state.customProviders);
        notify('Deleted!');
        render();
      }
    }

    function deleteDefaultProvider(name) {
      if (confirm(`Delete "${name}"? This will remove it from the default providers list.`)) {
        state.defaultProviders = state.defaultProviders.filter(p => p !== name);
        storage.set('default-providers', state.defaultProviders);
        notify('Default provider deleted!');
        render();
      }
    }

    function handleLogoUpload(e) {
      const file = e.target.files[0];
      if (!file) return;
      
      if (!file.type.startsWith('image/')) {
        notify('Please upload an image file');
        return;
      }
      
      if (file.size > 500 * 1024) {
        notify('Image must be under 500KB');
        return;
      }
      
      const reader = new FileReader();
      reader.onload = (event) => {
        const img = new Image();
        img.onload = () => {
          const canvas = document.createElement('canvas');
          const maxSize = 200;
          let w = img.width;
          let h = img.height;
          
          if (w > h) {
            if (w > maxSize) {
              h *= maxSize / w;
              w = maxSize;
            }
          } else {
            if (h > maxSize) {
              w *= maxSize / h;
              h = maxSize;
            }
          }
          
          canvas.width = w;
          canvas.height = h;
          canvas.getContext('2d').drawImage(img, 0, 0, w, h);
          
          const compressed = canvas.toDataURL('image/jpeg', 0.7);
          state.logoUrl = compressed;
          storage.set('logo-url', compressed);
          notify('Logo updated!');
          render();
        };
        img.src = event.target.result;
      };
      reader.readAsDataURL(file);
    }

    function saveBranding() {
      const url = document.getElementById('logoUrlInput')?.value.trim();
      const name = document.getElementById('orgNameInput')?.value.trim();
      const tagline = document.getElementById('orgTaglineInput')?.value.trim();
      
      if (url) {
        state.logoUrl = url;
        storage.set('logo-url', url);
      }
      if (name) {
        state.orgName = name;
        storage.set('org-name', name);
      }
      if (tagline) {
        state.orgTagline = tagline;
        storage.set('org-tagline', tagline);
      }
      
      notify('Branding updated!');
      render();
    }

    function removeLogo() {
      state.logoUrl = '';
      storage.set('logo-url', '');
      notify('Logo removed!');
      render();
    }

    function changePassword() {
      const newPw = document.getElementById('newPw')?.value;
      const confirmPw = document.getElementById('confirmPw')?.value;
      
      if (!newPw || newPw.length < 6) {
        notify('Password must be at least 6 characters');
        return;
      }
      if (newPw !== confirmPw) {
        notify('Passwords do not match');
        return;
      }
      
      state.password = newPw;
      storage.set('admin-password', newPw);
      notify('Password updated!');
      render();
    }

    // Render function
    function render() {
      const filtered = filterQualifications();
      const app = document.getElementById('app');
      const allProviders = getAllProviders();

      if (state.isAdmin && state.showBackend) {
        // Admin view
        app.innerHTML = `
          <div class="min-h-screen bg-gray-100 p-6">
            <div class="max-w-7xl mx-auto">
              <div class="flex justify-between items-center mb-6">
                <h1 class="text-3xl font-bold">Admin Panel</h1>
                <div class="flex gap-3">
                  <button onclick="state.showSettings = true; render();" class="px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700">‚öôÔ∏è Settings</button>
                  <button onclick="state.showBackend = false; render();" class="px-4 py-2 bg-teal-600 text-white rounded hover:bg-teal-700">Public View</button>
                  <button onclick="state.isAdmin = false; state.showBackend = false; render();" class="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600">Logout</button>
                </div>
              </div>

              <div class="grid md:grid-cols-3 gap-6 mb-6">
                <div class="bg-white rounded-lg shadow p-6">
                  <p class="text-sm text-gray-600">Total</p>
                  <p class="text-3xl font-bold text-teal-600">${state.qualifications.length}</p>
                </div>
                <div class="bg-white rounded-lg shadow p-6">
                  <p class="text-sm text-gray-600">Verified</p>
                  <p class="text-3xl font-bold text-green-600">${state.qualifications.filter(q => q.verificationStatus === 'verified').length}</p>
                </div>
                <div class="bg-white rounded-lg shadow p-6">
                  <p class="text-sm text-gray-600">Pending</p>
                  <p class="text-3xl font-bold text-yellow-600">${state.qualifications.filter(q => q.verificationStatus === 'pending').length}</p>
                </div>
              </div>

              <div class="bg-white rounded-lg shadow p-6 mb-6">
                <h2 class="text-xl font-semibold mb-4">Quick Actions</h2>
                <div class="flex flex-wrap gap-3">
                  <button onclick="loadDemo()" class="px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700">üìö Load Demo Data</button>
                  <button onclick="state.formData = {}; state.editingQual = null; state.showAddModal = true; render();" class="px-4 py-2 bg-teal-600 text-white rounded hover:bg-teal-700">‚ûï Add Qualification</button>
                  <button onclick="state.showProviderModal = true; render();" class="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">üìã Manage Providers</button>
                </div>
              </div>

              <div class="bg-white rounded-lg shadow overflow-x-auto">
                <table class="w-full">
                  <thead class="bg-gray-50">
                    <tr>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Title</th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Provider</th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Actions</th>
                    </tr>
                  </thead>
                  <tbody class="divide-y divide-gray-200">
                    ${state.qualifications.map(qual => {
                      const badge = getVerificationBadge(qual.verificationStatus || 'unverified');
                      return `
                        <tr class="hover:bg-gray-50">
                          <td class="px-6 py-4 text-sm">${qual.title}</td>
                          <td class="px-6 py-4 text-sm">${qual.provider}</td>
                          <td class="px-6 py-4">
                            <span class="px-2 py-1 text-xs font-semibold rounded border ${badge.color}">${badge.icon} ${badge.label}</span>
                          </td>
                          <td class="px-6 py-4">
                            <button onclick='state.editingQual = ${JSON.stringify(qual)}; state.formData = ${JSON.stringify(qual)}; state.showAddModal = true; render();' class="text-blue-600 hover:text-blue-800 mr-3">‚úèÔ∏è Edit</button>
                            <button onclick="deleteQualification(${qual.id})" class="text-red-600 hover:text-red-800">üóëÔ∏è Delete</button>
                          </td>
                        </tr>
                      `;
                    }).join('')}
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        `;
      } else {
        // Public view
        app.innerHTML = `
          <div class="bg-yellow-50 border-b-2 border-yellow-400 py-3 px-4">
            <p class="text-sm font-semibold text-yellow-900">‚ö†Ô∏è DISCLAIMER: Verify all qualifications with GNAB</p>
          </div>

          <header class="bg-white shadow-sm">
            <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
              <div class="flex items-center gap-3">
                ${state.logoUrl ? `
                  <img src="${state.logoUrl}" class="w-12 h-12 object-contain rounded" onerror="this.style.display='none'">
                ` : `
                  <div class="w-12 h-12 bg-blue-600 rounded flex items-center justify-center text-2xl">üìö</div>
                `}
                <div>
                  <div class="text-xl font-bold">${state.orgName}</div>
                  <div class="text-xs text-gray-600">${state.orgTagline}</div>
                </div>
              </div>
              <div>
                ${state.isAdmin ? `
                  <button onclick="state.showBackend = true; render();" class="px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 mr-2">Admin Panel</button>
                  <button onclick="state.isAdmin = false; render();" class="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600">Logout</button>
                ` : `
                  <button onclick="state.showLogin = true; render();" class="px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600">Admin Portal</button>
                `}
              </div>
            </div>
          </header>

          <div class="bg-gradient-to-r from-teal-700 to-teal-500 text-white py-16 px-4">
            <div class="max-w-7xl mx-auto">
              <h1 class="text-5xl font-bold mb-2">GNQCF</h1>
              <p class="text-xl">Grenada National Qualifications Framework</p>
            </div>
          </div>

          <div class="max-w-7xl mx-auto px-4 py-8">
            <div class="bg-white rounded-lg shadow p-6 mb-6">
              ${state.qualifications.length === 0 ? `
                <div class="bg-blue-50 border border-blue-200 rounded p-4 mb-4">
                  <h3 class="font-bold mb-2">üëã Welcome!</h3>
                  <p class="mb-3">No data available.</p>
                  ${state.isAdmin ? `<button onclick="loadDemo()" class="px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Load Demo Data</button>` : ''}
                </div>
              ` : ''}

              <div class="mb-4">
                <input type="text" placeholder="Search qualifications..." class="w-full px-4 py-2 border rounded" onkeyup="state.search = this.value; render();">
              </div>

              <div class="grid md:grid-cols-5 gap-4">
                <select class="px-3 py-2 border rounded" onchange="state.filters.provider = this.value; render();">
                  <option value="all">All Providers</option>
                  ${allProviders.map(p => `<option value="${p}">${p}</option>`).join('')}
                </select>
                <select class="px-3 py-2 border rounded" onchange="state.filters.qualification = this.value; render();">
                  <option value="all">All Types</option>
                  ${types.map(t => `<option value="${t}">${t}</option>`).join('')}
                </select>
                <select class="px-3 py-2 border rounded" onchange="state.filters.level = this.value; render();">
                  <option value="all">All Levels</option>
                  ${levels.map(l => `<option value="${l}">${l}</option>`).join('')}
                </select>
                <select class="px-3 py-2 border rounded" onchange="state.filters.sector = this.value; render();">
                  <option value="all">All Sectors</option>
                  ${sectors.map(s => `<option value="${s}">${s}</option>`).join('')}
                </select>
                <select class="px-3 py-2 border rounded" onchange="state.filters.verificationStatus = this.value; render();">
                  <option value="all">All Status</option>
                  <option value="verified">‚úì Verified</option>
                  <option value="pending">‚è≥ Pending</option>
                  <option value="unverified">‚ö† Unverified</option>
                </select>
              </div>
            </div>

            <div class="bg-white rounded-lg shadow p-6">
              ${filtered.length === 0 ? `
                <p class="text-center py-12 text-gray-500">No qualifications found</p>
              ` : `
                <p class="mb-4 text-sm text-gray-600">Showing ${filtered.length} qualification${filtered.length !== 1 ? 's' : ''}</p>
                <div class="space-y-4">
                  ${filtered.map(qual => {
                    const badge = getVerificationBadge(qual.verificationStatus || 'unverified');
                    return `
                      <div class="border rounded-lg p-5 hover:shadow-md transition-shadow">
                        <div class="flex justify-between items-start mb-2">
                          <h3 class="text-lg font-semibold text-teal-700">${qual.title}</h3>
                          <span class="px-3 py-1 text-xs font-semibold rounded border ${badge.color}">${badge.icon} ${badge.label}</span>
                        </div>
                        <div class="text-sm text-gray-600 space-y-1">
                          <p><strong>Provider:</strong> ${qual.provider}</p>
                          <p><strong>Type:</strong> ${qual.type} | <strong>Level:</strong> ${qual.level} | <strong>Sector:</strong> ${qual.sector}</p>
                          ${qual.description ? `<p class="mt-2">${qual.description}</p>` : ''}
                        </div>
                      </div>
                    `;
                  }).join('')}
                </div>
              `}
            </div>
          </div>
        `;
      }

      // Modals
      if (state.showLogin) {
        app.innerHTML += `
          <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white rounded-lg p-6 w-96">
              <h2 class="text-2xl font-bold mb-4">Admin Portal</h2>
              <input type="password" id="pwInput" placeholder="Enter password" class="w-full px-4 py-2 border rounded mb-4" onkeypress="if(event.key === 'Enter') login()">
              <div class="flex gap-3">
                <button onclick="login()" class="flex-1 px-4 py-2 bg-teal-600 text-white rounded hover:bg-teal-700">Access Portal</button>
                <button onclick="state.showLogin = false; render();" class="flex-1 px-4 py-2 border rounded hover:bg-gray-50">Cancel</button>
              </div>
            </div>
          </div>
        `;
      }

      if (state.showAddModal) {
        app.innerHTML += `
          <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto">
            <div class="bg-white rounded-lg p-6 w-full max-w-2xl my-8">
              <h2 class="text-2xl font-bold mb-4">${state.editingQual ? 'Edit' : 'Add'} Qualification</h2>
              <div class="space-y-4">
                <input type="text" placeholder="Title *" class="w-full px-3 py-2 border rounded" value="${state.formData.title || ''}" onchange="state.formData.title = this.value">
                <select class="w-full px-3 py-2 border rounded" onchange="state.formData.provider = this.value">
                  <option value="">Select Provider *</option>
                  ${allProviders.map(p => `<option value="${p}" ${state.formData.provider === p ? 'selected' : ''}>${p}</option>`).join('')}
                </select>
                <div class="grid grid-cols-2 gap-4">
                  <select class="w-full px-3 py-2 border rounded" onchange="state.formData.type = this.value">
                    <option value="">Type</option>
                    ${types.map(t => `<option value="${t}" ${state.formData.type === t ? 'selected' : ''}>${t}</option>`).join('')}
                  </select>
                  <select class="w-full px-3 py-2 border rounded" onchange="state.formData.level = this.value">
                    <option value="">Level</option>
                    ${levels.map(l => `<option value="${l}" ${state.formData.level === l ? 'selected' : ''}>${l}</option>`).join('')}
                  </select>
                </div>
                <select class="w-full px-3 py-2 border rounded" onchange="state.formData.sector = this.value">
                  <option value="">Sector</option>
                  ${sectors.map(s => `<option value="${s}" ${state.formData.sector === s ? 'selected' : ''}>${s}</option>`).join('')}
                </select>
                <textarea placeholder="Description" class="w-full px-3 py-2 border rounded" rows="3" onchange="state.formData.description = this.value">${state.formData.description || ''}</textarea>
              </div>
              <div class="flex gap-3 mt-6">
                <button onclick="saveQualification()" class="flex-1 px-4 py-2 bg-teal-600 text-white rounded hover:bg-teal-700">Save</button>
                <button onclick="state.showAddModal = false; render();" class="flex-1 px-4 py-2 border rounded hover:bg-gray-50">Cancel</button>
              </div>
            </div>
          </div>
        `;
      }

      if (state.showProviderModal) {
